/*
Project 1
Name: 1. Cris Huynh
      2. Punya Pratishtha Kalia

*/

-- PART A
CREATE DATABASE Project1;
USE Project1;
DROP DATABASE Project1;

CREATE TABLE ADMIN (
AdminID DECIMAL(12) NOT NULL PRIMARY KEY,
LastName VARCHAR(25) NOT NULL,
FirstName VARCHAR(25) NOT NULL,
AManagerID DECIMAL(12) NOT NULL, 
FOREIGN KEY (AManagerID) REFERENCES ARTISTMANAGER);

CREATE TABLE AGREEMENT (
AgreementNbr DECIMAL(12) PRIMARY KEY NOT NULL,
GrossAmount DECIMAL(12,2) NOT NULL,
AtSourceTaxWithheld DECIMAL(12,2),
EventID DECIMAL(12) NOT NULL,
ContractID DECIMAL(12) NOT NULL ,
FOREIGN KEY (ContractID) REFERENCES CONTRACTS);

CREATE TABLE ARTIST (
ArtistID DECIMAL(12) PRIMARY KEY NOT NULL,
LastName VARCHAR(25) NOT NULL,
FirstName VARCHAR(25) NOT NULL,
Gender CHAR(1) CHECK(Gender IN('M', 'F', 'N')),
YearOfBirth DECIMAL(4) CHECK (YearOfBirth < 2023),
PhoneNumber CHAR(10) NOT NULL,
Email VARCHAR(50) NOT NULL,
ArtistType CHAR(1) CHECK (ArtistType IN('C','P')) NOT NULL);


CREATE TABLE ARTISTMANAGER (
AManagerID DECIMAL(12) NOT NULL PRIMARY KEY,
LastName VARCHAR(25) NOT NULL ,
FirstName VARCHAR(25) NOT NULL,
ArtistID DECIMAL(12) NOT NULL 
FOREIGN KEY (ArtistID) REFERENCES ARTIST);


CREATE TABLE CONTRACTS (
ContractID DECIMAL(12) NOT NULL PRIMARY KEY,
StartDate DATE NOT NULL,
EndDate DATE NOT NULL,
RoyaltyPercentage DECIMAL(3,2) NOT NULL,
ArtistID DECIMAL(12) NOT NULL,
FOREIGN KEY (ArtistID) REFERENCES ARTIST);



/* PART B. 1*/
INSERT INTO ADMIN VALUES(102, 'Mahomes', 'Patrick', 18565);
INSERT INTO ADMIN VALUES(202, 'Tesfaye', 'Abel', 20044);
INSERT INTO ADMIN VALUES(303, 'Johnson', 'Dwayne', 35578);
INSERT INTO ADMIN VALUES(404, 'Tate', 'Andrew', 49488);
INSERT INTO ADMIN VALUES(505, 'Graham', 'Aubrey', 58898);


INSERT INTO AGREEMENT VALUES(099282, 60, 10, 5585, 2232);
INSERT INTO AGREEMENT VALUES(737371, 60, 15, 8574, 1718);
INSERT INTO AGREEMENT VALUES(563345, 75, 15, 1273, 8811);
INSERT INTO AGREEMENT VALUES(678766, 95, 30, 3217, 1273);
INSERT INTO AGREEMENT VALUES(234699, 85, 20, 7324, 3217);


INSERT INTO ARTIST VALUES(10587, 'Pham', 'Arlene', 'F', 2004, 4163442332, 'hoanglam04@gmailcom', 'C');
INSERT INTO ARTIST VALUES(22465, 'Velev', 'Kosta', 'M', 2004, 6472221718, 'kostavelev@gmail.com', 'P');
INSERT INTO ARTIST VALUES(33665, 'Ifran', 'Muneeb', 'M', 2004, 6472238811, 'muneeb416@gmail.com', 'C');
INSERT INTO ARTIST VALUES(44875, 'Kwaija', 'Saif', 'M', 2004, 6472156095, 'saifkwaija231@gmail.com', 'C');
INSERT INTO ARTIST VALUES(55957, 'Le', 'Martin', 'M', 2004, 4168483323, 'letungtam904@gmail.com', 'P');


INSERT INTO ARTISTMANAGER VALUES(18565, 'Nguyen', 'Harmonie', 10587);
INSERT INTO ARTISTMANAGER VALUES(20044, 'Fadulti', 'Matteo', 22465);
INSERT INTO ARTISTMANAGER VALUES(35578, 'Pratishtha Kalia', 'Punya', 33665);
INSERT INTO ARTISTMANAGER VALUES(49488, 'Muniz', 'Sean', 44875);
INSERT INTO ARTISTMANAGER VALUES(58898, 'Huynh', 'Cris', 55957);

INSERT INTO CONTRACTS VALUES(2232, '23-JUL-2021', '12-JAN-2026', 7.00, 10587);
INSERT INTO CONTRACTS VALUES(1718, '19-MAY-2022', '1-JUL-2025', 8.32, 22465);
INSERT INTO CONTRACTS VALUES(8811, '18-FEB-2019', '12-JAN-2026', 9.50, 33665);
INSERT INTO CONTRACTS VALUES(1273, '09-NOV-2023', '1-JUL-2027', 9.05, 44875);
INSERT INTO CONTRACTS VALUES(3217, '01-MAR-2022', '12-JAN-2026', 7.95, 55957);


SELECT * FROM ADMIN;
SELECT * FROM AGREEMENT;
SELECT * FROM ARTIST;
SELECT * FROM ARTISTMANAGER;
SELECT * FROM CONTRACTS;

/*2*/
ALTER TABLE ARTISTMANAGER ADD Salary DECIMAL(9,2);
UPDATE ARTISTMANAGER SET Salary = 85000.00;

/*3*/
ALTER TABLE ARTIST ALTER COLUMN Email VARCHAR(55);

/*4*/
ALTER TABLE ARTIST DROP CONSTRAINT CK__ARTIST__ArtistTy__4E88ABD4; -- Depends the constraint
ALTER TABLE ARTIST DROP COLUMN ArtistType;

/*5 Delete Last Name */
DELETE FROM AGREEMENT; -- Deletes all data from full table
DELETE FROM AGREEMENT WHERE EventID = 5585; -- Deletes the data matching the condition

/*6*/
DROP TABLE AGREEMENT; -- Deleles fully the table, it will be removed, the whole structure is deleted. It wont exist
